<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx"
					   showStatusBar="false"
					   alwaysInFront="true" xmlns:com="com.*"
					   backgroundColor="0x232323"
					   creationComplete="creationComplete(event)">
		
			<com:ApplicationToolBar id="toolBar"/>
				
				
			<s:Button id="btnOpen" label="Open" click="onOpenClick(event)"/>
			<s:Image id="imgMain" left="0" right="0" top="36" bottom="0" smooth="true"/>
	
	
	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			import mx.events.ResizeEvent;
			
			private var _file:File;
			private var _fileDirectory:Array;
			
			protected function creationComplete(event:FlexEvent):void
			{				
				this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
				this.addEventListener(Event.RESIZE, onResize);
				//FlexGlobals.topLevelApplication.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
				this.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
			}

			protected function onAddedToStage(event:Event):void
			{
				assignProperties();
				
				//Init File Container
				_file = new File();
				_file.addEventListener(Event.SELECT, onFileSelect);
			}
			
			private function assignProperties():void
			{
				btnOpen.left = stage.width/2 - btnOpen.width /2;	
				btnOpen.top = stage.height/2 - btnOpen.height /2;	
			}
			
			protected function onResize(event:ResizeEvent):void
			{
				// TODO Auto-generated method stub
				assignProperties();
			}
			
			protected function onOpenClick(event:MouseEvent):void
			{
				_file.browseForOpen("Open Image...");			
			}
		
			
			
			
			protected function onFileSelect(e:Event):void
			{
				trace(e.target);
				imgMain.source = e.target.url;
			}
			
			protected function onKeyDown(e:KeyboardEvent):void
			{				
				switch(e.keyCode)
				{
					case Keyboard.T:
						toolBar.visible = toolBar.visible ? false : true;
						trace(toolBar.visible);
					break;
				}
			}
			
		]]>
	</fx:Script>
		
</s:WindowedApplication>
